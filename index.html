<!DOCTYPE html>
<html>
    <style>
        input.compid {width: 5%;float: right;font-size:75%}
        button.compid {width: 10%;float: right;font-size:90%}
        .button {background-color: #04AA6D;border: 1px solid green;color: white;padding: 10px 24px;cursor: pointer;width: 50%;display: block;margin-left: auto;margin-right: auto;}
        .left {background-color: #04AA6D;border: 1px solid green;color: white;padding: 10px 24px;cursor: pointer;width: 25%;display: block;float: left;position: relative;left: 25%;}
        .right {background-color: #04AA6D;border: 1px solid green;color: white;padding: 10px 24px;cursor: pointer;width: 25%;display: block;float: right;position: relative;right: 9.25%;}
    </style>
    <body>
        <button class="button" onclick="forward()">Forward</button>
        <button class="button" onclick="back()">Backward</button>
        <input id="comid" class="compid" type="text" oninput="changeId()"></input>
        <button class="compid">Computer Id Change</button>
        <button class="left" onclick="left()">TurnLeft</button>
        <button class="right" onclick="right()">TurnRight</button>
        <p id="test"></p>
    </body>
    <script>
        var channel = prompt("What server are you connecting to:", "2.tcp.ngrok.io:10546")
        let id = 0;
        var changeId = ()=>{
            if(document.getElementById("comid").value != "") {
                id = document.getElementById("comid").value;
            } else {
                id = 0;
            }
        }
        if(!channel) {
            window.location.reload(true)
        }
        console.log(channel)
        const w = new WebSocket("ws://"+channel)
        w.addEventListener("open", () => {
            console.log("ok");
        });
        w.addEventListener("message", (msg) => {
            console.log(msg)
        });
        function left() {
            w.send(id+"turtle.turnLeft()");
        };
        function right() {
            w.send(id+"turtle.turnRight()");
        };
        function forward() {
            w.send(id+"turtle.forward()");
        };
        function back() {
            w.send(id+"turtle.back()");
        };
    </script>
</html>
